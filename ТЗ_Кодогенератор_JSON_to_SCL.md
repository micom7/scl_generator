# –¢–ó: –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä JSON ‚Üí SCL (DB_Mechs, DB_SimConfig, DB_SimMechs)

**–í–µ—Ä—Å—ñ—è:** 1.1  
**–î–∞—Ç–∞:** 2026-02-20  
**–ü—Ä–æ—î–∫—Ç:** Yagotin_Lysohor / Elevator_System  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Siemens S7-1500, TIA Portal 19, SCL

---

## 1. –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑—á–∏—Ç—É—î —Ñ–∞–π–ª –æ–ø–∏—Å—É —Å—Ö–µ–º–∏ –µ–ª–µ–≤–∞—Ç–æ—Ä–∞ —É —Ñ–æ—Ä–º–∞—Ç—ñ `graph.json` —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î —Ç—Ä–∏ SCL-—Ñ–∞–π–ª–∏ –¥–ª—è TIA Portal:

| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|---|---|
| `DB_Mechs.scl` | –ú–∞—Å–∏–≤–∏ –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ (–±–∞–∑–æ–≤–∞ —à–∏–Ω–∞ + —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ –º–∞—Å–∏–≤–∏) |
| `DB_SimConfig.scl` | –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ–≤ (RETAIN) |
| `DB_SimMechs.scl` | –°—Ç–∞–Ω–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ–≤ —É runtime (NON_RETAIN) |

---

## 2. –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ

### 2.1 –§–∞–π–ª graph.json

–§–æ—Ä–º–∞—Ç –æ–ø–∏—Å–∞–Ω–∏–π —É `–§–û–†–ú–ê–¢_JSON.txt`. –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–∞–∫—ñ –ø–æ–ª—è:

```
deviceTypes[].name   ‚Äî —Å–∏—Å—Ç–µ–º–Ω–∞ –Ω–∞–∑–≤–∞ —Ç–∏–ø—É (–∫–ª—é—á –¥–ª—è –º–∞–ø–ø—ñ–Ω–≥—É)
devices[].name       ‚Äî –≤—ñ–¥–æ–±—Ä–∞–∂—É–≤–∞–Ω–∞ –Ω–∞–∑–≤–∞ –ø—Ä–∏—Å—Ç—Ä–æ—é (–¥–ª—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ —É SCL)
devices[].id         ‚Äî —ñ–Ω–¥–µ–∫—Å –±–∞–∑–æ–≤–æ–≥–æ —Å–ª–æ—Ç—É (SlotId) –≤ –º–∞—Å–∏–≤—ñ Mechs[]
devices[].type       ‚Äî –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ deviceTypes[].name
```

> ‚ö†Ô∏è **–í–∞–∂–ª–∏–≤–æ:** –ø–æ–ª–µ `id` –∑–∞–¥–∞—î **—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —ñ–Ω–¥–µ–∫—Å** —Å–ª–æ—Ç–∞ –≤ `DB_Mechs.Mechs[]`. –ó–Ω–∞—á–µ–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –Ω–µ–≤—ñ–¥'—î–º–Ω–∏–º —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º, —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º —Å–µ—Ä–µ–¥ —É—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ —É –ø—Ä–æ—î–∫—Ç—ñ.

–ü–æ–ª—è `pos_x`, `pos_y`, `ports`, `internal_connections`, `connections` –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º **—ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è** ‚Äî –≤–æ–Ω–∏ —î —Å–ø–µ—Ü–∏—Ñ—ñ–∫–æ—é GUI-—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —ñ –Ω–µ –Ω–µ—Å—É—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–ª—è PLC.

### 2.2 –ü—Ä–∏–∫–ª–∞–¥ –≤—Ö—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É

```json
{
  "deviceTypes": [
    { "name": "noria",  "label": "Noria",  ... },
    { "name": "redler", "label": "Redler", ... },
    { "name": "gate2P", "label": "Gate2P", ... },
    { "name": "Fan",    "label": "Fan",    ... },
    { "name": "Silo",   "label": "Silo",   ... }
  ],
  "devices": [
    { "name": "Noria",   "id": "1", "type": "noria",  ... },
    { "name": "Noria 2", "id": "2", "type": "noria",  ... },
    { "name": "Redler",  "id": "3", "type": "redler", ... },
    { "name": "Gate2P",  "id": "4", "type": "gate2P", ... },
    { "name": "Fan",     "id": "5", "type": "Fan",    ... }
  ],
  ...
}
```

---

## 3. –ú–∞–ø–ø—ñ–Ω–≥ —Ç–∏–ø—ñ–≤ JSON ‚Üí TIA Portal

### 3.1 –¢–∞–±–ª–∏—Ü—è –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö —Ç–∏–ø—ñ–≤

–ú–∞–ø–ø—ñ–Ω–≥ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–±–µ–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è —Ä–µ–≥—ñ—Å—Ç—Ä—É** (`case-insensitive`):

| JSON `deviceTypes[].name` | TIA —Ç–∏–ø (`DeviceType`) | UDT –º–µ—Ö–∞–Ω—ñ–∑–º—É | UDT —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ |
|---|---|---|---|
| `noria` | `TYPE_NORIA` | `UDT_Noria` | `UDT_SimNoriaState` / `UDT_SimNoriaConfig` |
| `redler` | `TYPE_REDLER` | `UDT_Redler` | `UDT_SimRedlerState` / `UDT_SimRedlerConfig` |
| `gate2p` | `TYPE_GATE2P` | `UDT_Gate2P` | *(–Ω–µ–º–∞—î —Å–∏–º—É–ª—è—Ç–æ—Ä–∞)* |
| `fan` | `TYPE_FAN` | `UDT_Fan` | `UDT_SimFanState` / `UDT_SimFanConfig` |

### 3.2 –ù–µ—Ç–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó (–ø–æ–º–∏–ª–∫–∞)

–Ø–∫—â–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π –º–∞—î `type`, —è–∫–æ–≥–æ **–Ω–µ–º–∞—î –≤ —Ç–∞–±–ª–∏—Ü—ñ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö —Ç–∏–ø—ñ–≤**, ‚Äî —Ü–µ **–ø–æ–º–∏–ª–∫–∞**. –¢–∞–∫–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π –≤–≤–∞–∂–∞—î—Ç—å—Å—è **–Ω–µ—Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–º –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º**: –≤—ñ–Ω –∑–∞–π–º–∞—î —Å–ª–æ—Ç —É `Mechs[]` (—á–µ—Ä–µ–∑ —Å–≤—ñ–π `id`), –∞–ª–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ –∑–Ω–∞—î, —è–∫ –π–æ–≥–æ –æ–±—Ä–æ–±–∏—Ç–∏.

> **–û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è:** `id` = SlotId. –Ø–∫—â–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π —î –≤ —Å—Ö–µ–º—ñ —ñ –º–∞—î `id`, –≤—ñ–Ω —Ä–µ–∑–µ—Ä–≤—É—î —Å–ª–æ—Ç. –ù–µ–≤—ñ–¥–æ–º–∏–π —Ç–∏–ø –æ–∑–Ω–∞—á–∞—î, —â–æ PLC-–∫–æ–¥ –¥–ª—è —Ü—å–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –≤—ñ–¥—Å—É—Ç–Ω—ñ–π ‚Äî —Ü–µ –ø–æ–º–∏–ª–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, —è–∫—É —Ç—Ä–µ–±–∞ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –≤—Ä—É—á–Ω—É.

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∏–≤–æ–¥–∏—Ç—å `[ERROR]` —ñ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –∑ –∫–æ–¥–æ–º `2`:

```
[ERROR] –ü—Ä–∏—Å—Ç—Ä—ñ–π "–°–∏–ª–æ—Å 1" (id=6): —Ç–∏–ø "Silo" –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è TIA Portal.
        –î–æ–¥–∞–π—Ç–µ —Ç–∏–ø –¥–æ –º–∞–ø–ø—ñ–Ω–≥—É –∞–±–æ –≤–∏–¥–∞–ª—ñ—Ç—å –ø—Ä–∏—Å—Ç—Ä—ñ–π –∑—ñ —Å—Ö–µ–º–∏.
```

**–í–∏–Ω—è—Ç–æ–∫ ‚Äî —è–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –Ω–µ-–º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤:** —Ç–∏–ø–∏, —â–æ —è–≤–Ω–æ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —è–∫ `non_mechanism` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `silo`, `sensor`, `label`), **—ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è –∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è–º** (`[WARN]`), –∞ –Ω–µ –∑ –ø–æ–º–∏–ª–∫–æ—é. –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É—î—Ç—å—Å—è —É `defaults.py`:

```python
NON_MECHANISM_TYPES = {"silo", "sensor", "label"}  # case-insensitive
```

```
[WARN] –ü—Ä–∏—Å—Ç—Ä—ñ–π "–°–∏–ª–æ—Å 1" (id=6): —Ç–∏–ø "Silo" —î –Ω–µ-–º–µ—Ö–∞–Ω—ñ–∑–º–æ–º ‚Üí –ø—Ä–æ–ø—É—â–µ–Ω–æ.
```

### 3.3 Gate2P ‚Äî –±–µ–∑ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞

`Gate2P` –≤–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ `DB_Mechs` (–º–∞—Å–∏–≤ `Gate2P`), –∞–ª–µ **–Ω–µ –≤–∫–ª—é—á–∞—î—Ç—å—Å—è** –¥–æ `DB_SimConfig` —Ç–∞ `DB_SimMechs`, –æ—Å–∫—ñ–ª—å–∫–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä `FC_SimGate2P` –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π.

---

## 4. –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–ª–æ—Ç—ñ–≤ —Ç–∞ —ñ–Ω–¥–µ–∫—Å—ñ–≤

### 4.1 SlotId ‚Äî –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –ø–æ–ª—è `id`

–ü–æ–ª–µ `id` –≤ `graph.json` **—î SlotId** ‚Äî —ñ–Ω–¥–µ–∫—Å–æ–º —É –º–∞—Å–∏–≤—ñ `Mechs[]`. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä **–Ω–µ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–∞—î** SlotId, –∞ –∑—á–∏—Ç—É—î –π–æ–≥–æ –∑ JSON.

**–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó `id`:**

| –£–º–æ–≤–∞ | –†–µ–∞–∫—Ü—ñ—è |
|---|---|
| `id` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –∞–±–æ `null` | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| `id` –Ω–µ —î —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| `id` < 0 | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| –î—É–±–ª—ñ–∫–∞—Ç `id` —Å–µ—Ä–µ–¥ –±—É–¥—å-—è–∫–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |

```
[ERROR] –ü—Ä–∏—Å—Ç—Ä—ñ–π "Redler" (id="abc"): id –º–∞—î –±—É—Ç–∏ –Ω–µ–≤—ñ–¥'—î–º–Ω–∏–º —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º.
[ERROR] –ü—Ä–∏—Å—Ç—Ä—ñ–π "Noria 2" (id=1): –¥—É–±–ª—ñ–∫–∞—Ç id ‚Äî –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π –ø—Ä–∏—Å—Ç—Ä–æ—î–º "Noria" (id=1).
```

> **–û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è:** `id` –∑–∞–¥–∞—î—Ç—å—Å—è –≤—Ä—É—á–Ω—É –≤ –≥—Ä–∞—Ñ—ñ—á–Ω–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ –π –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –ª–æ–≥—ñ—á–Ω—É –∞–¥—Ä–µ—Å–∞—Ü—ñ—é –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è. PLC-–∫–æ–¥ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ —Å–ª–æ—Ç—ñ–≤ –∑–∞ —Ü–∏–º —ñ–Ω–¥–µ–∫—Å–æ–º, —Ç–æ–º—É –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –Ω–µ–ø—Ä–∏–ø—É—Å—Ç–∏–º—ñ.

### 4.2 –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è TypedIndex

–ü—ñ—Å–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Å—ñ—Ö `id` –ø—Ä–∏—Å—Ç—Ä–æ—ó **–æ–¥–Ω–æ–≥–æ —Ç–∏–ø—É** —Å–æ—Ä—Ç—É—é—Ç—å—Å—è –∑–∞ `id` (—á–∏—Å–ª–æ–≤–æ) —ñ –æ—Ç—Ä–∏–º—É—é—Ç—å `TypedIndex` –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –≤—ñ–¥ `0`:

```
Noria (id=1) ‚Üí TypedIndex = 0
Noria (id=2) ‚Üí TypedIndex = 1
Redler (id=3) ‚Üí TypedIndex = 0
Gate2P (id=4) ‚Üí TypedIndex = 0
Fan (id=5)   ‚Üí TypedIndex = 0
```

`TypedIndex` ‚Äî —ñ–Ω–¥–µ–∫—Å —É —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–æ–º—É –º–∞—Å–∏–≤—ñ (`Noria[]`, `Redler[]` —Ç–æ—â–æ).

### 4.3 –†–æ–∑–º—ñ—Ä –º–∞—Å–∏–≤—É Mechs[]

`MECHS_COUNT = max(id —Å–µ—Ä–µ–¥ —É—Å—ñ—Ö –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤)`

–ú–∞—Å–∏–≤ `Mechs[]` —Ä–æ–∑–º—ñ—Ä–Ω–∏–π –≤—ñ–¥ `0` –¥–æ `MECHS_COUNT` –≤–∫–ª—é—á–Ω–æ. **–°–ª–æ—Ç–∏ –º—ñ–∂ –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–µ–∑–∞–ø–æ–≤–Ω–µ–Ω–∏–º–∏** (–∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º UDT). –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∏–≤–æ–¥–∏—Ç—å –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è, —è–∫—â–æ –≤ –º–∞—Å–∏–≤—ñ —î "–ø—Ä–æ–≥–∞–ª–∏–Ω–∏":

```
[WARN] –°–ª–æ—Ç–∏ 2..4 —É Mechs[] –Ω–µ –∑–∞–π–Ω—è—Ç—ñ –∂–æ–¥–Ω–∏–º –ø—Ä–∏—Å—Ç—Ä–æ—î–º (id: 0,1,5 ‚Üí –ø—Ä–æ–≥–∞–ª–∏–Ω–∞ 2‚Äì4).
```

### 4.4 –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

| –ü—Ä–∏—Å—Ç—Ä—ñ–π | id (SlotId) | Type | TypedIndex |
|---|---|---|---|
| Noria (id=1)  | 1 | TYPE_NORIA  | 0 |
| Noria 2 (id=2) | 2 | TYPE_NORIA  | 1 |
| Redler (id=3) | 3 | TYPE_REDLER | 0 |
| Gate2P (id=4) | 4 | TYPE_GATE2P | 0 |
| Fan (id=5)    | 5 | TYPE_FAN    | 0 |

`MECHS_COUNT = 5` ‚Üí `Mechs : ARRAY [0..5]`

### 4.5 –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —Ä–æ–∑–º—ñ—Ä—ñ–≤ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏—Ö –º–∞—Å–∏–≤—ñ–≤

–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è —è–∫ **(–∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ - 1)**, –æ—Å–∫—ñ–ª—å–∫–∏ TIA Portal –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–∫–ª—é—á–Ω—ñ –º–µ–∂—ñ `ARRAY[0..N]`:

```
REDLERS_COUNT  = len(redlers) - 1
NORIAS_COUNT   = len(norias)  - 1
GATES2P_COUNT  = len(gates)   - 1
FANS_COUNT     = len(fans)    - 1
```

–Ø–∫—â–æ –≥—Ä—É–ø–∞ –ø–æ—Ä–æ–∂–Ω—è, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∞ —Å–µ–∫—Ü—ñ—è –≤ `VAR` **–Ω–µ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è**.

---

## 5. –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ–∞–π–ª—É DB_Mechs.scl

### 5.1 –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```scl
// ==============================================================================
// DB_Mechs - –ú–∞—Å–∏–≤–∏ –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤
// ==============================================================================
// Project  : <ProjectName –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∞–±–æ "Elevator_System">
// Generated: <–¥–∞—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó>
// Source   : <—ñ–º'—è graph.json —Ñ–∞–π–ª—É>
// Devices  : <–∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤> / <–∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å>
// ==============================================================================

DATA_BLOCK "DB_Mechs"
{ S7_Optimized_Access := 'TRUE' }
VERSION : 1.0

VAR
    Mechs  : ARRAY [0.."MECHS_COUNT"]   OF "UDT_BaseMechanism";
    Redler : ARRAY [0.."REDLERS_COUNT"] OF "UDT_Redler";      // —è–∫—â–æ —î —Ä–µ–¥–ª–µ—Ä–∏
    Noria  : ARRAY [0.."NORIAS_COUNT"]  OF "UDT_Noria";       // —è–∫—â–æ —î –Ω–æ—Ä—ñ—ó
    Gate2P : ARRAY [0.."GATES2P_COUNT"] OF "UDT_Gate2P";      // —è–∫—â–æ —î –∑–∞—Å—É–≤–∫–∏
    Fan    : ARRAY [0.."FANS_COUNT"]    OF "UDT_Fan";          // —è–∫—â–æ —î –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∏
END_VAR

BEGIN
    // === –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø –°–õ–û–¢–Ü–í ===

    // --- –†–µ–¥–ª–µ—Ä–∏ (slot 0 .. <N>) ---
    Mechs[0].SlotId     := 0;
    Mechs[0].DeviceType := "TYPE_REDLER";
    Mechs[0].TypedIndex := 0;
    Mechs[0].Enable_OK  := TRUE;
    // ... (–ø–æ –æ–¥–Ω–æ–º—É –±–ª–æ–∫—É –Ω–∞ –∫–æ–∂–µ–Ω –º–µ—Ö–∞–Ω—ñ–∑–º)

END_DATA_BLOCK
```

### 5.2 –°–µ–∫—Ü—ñ—è BEGIN: —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ª–æ—Ç—ñ–≤

–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –±–ª–æ–∫ –∑ 4 —Ä—è–¥–∫–∏ + –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫-—Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫.  
–ü–µ—Ä–µ–¥ –≥—Ä—É–ø–æ—é ‚Äî –∫–æ–º–µ–Ω—Ç–∞—Ä-–∑–∞–≥–æ–ª–æ–≤–æ–∫ —ñ–∑ SlotId –¥—ñ–∞–ø–∞–∑–æ–Ω–æ–º —Ç–∞ –Ω–∞–∑–≤–æ—é –≥—Ä—É–ø–∏.

### 5.3 –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø–æ–ª—ñ–≤

–ü–æ—Ä—É—á —ñ–∑ –∫–æ–∂–Ω–∏–º –±–ª–æ–∫–æ–º (–∞–±–æ –Ω–∞–¥ –Ω–∏–º) ‚Äî –∫–æ–º–µ–Ω—Ç–∞—Ä –∑ –Ω–∞–∑–≤–æ—é –ø—Ä–∏—Å—Ç—Ä–æ—é —Ç–∞ –π–æ–≥–æ `id` –∑ JSON:

```scl
    // Noria "Noria" (id=1)
    Mechs[1].SlotId     := 1;
    Mechs[1].DeviceType := "TYPE_NORIA";
    Mechs[1].TypedIndex := 0;
    Mechs[1].Enable_OK  := TRUE;
```

---

## 6. –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ–∞–π–ª—É DB_SimConfig.scl

### 6.1 –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```scl
// ==============================================================================
// DB_SimConfig - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ–≤ –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤
// ==============================================================================
// Generated: <–¥–∞—Ç–∞>
// Source   : <—Ñ–∞–π–ª>
// NOTE: Gate2P –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ (—Å–∏–º—É–ª—è—Ç–æ—Ä –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π)
// ==============================================================================

DATA_BLOCK "DB_SimConfig"
{ S7_Optimized_Access := 'TRUE' }
VERSION : 2.1
    
VAR
    Redler : ARRAY[0.."REDLERS_COUNT"] OF "UDT_SimRedlerConfig";  // —è–∫—â–æ —î
    Noria  : ARRAY[0.."NORIAS_COUNT"]  OF "UDT_SimNoriaConfig";   // —è–∫—â–æ —î
    Fan    : ARRAY[0.."FANS_COUNT"]    OF "UDT_SimFanConfig";      // —è–∫—â–æ —î
END_VAR

BEGIN
    // === –†–µ–¥–ª–µ—Ä–∏ ===
    Redler[0].Enable            := TRUE;
    Redler[0].StartupTime_ms    := 3000;
    Redler[0].StopTime_ms       := 2000;
    Redler[0].SimFault_Breaker  := FALSE;
    Redler[0].FaultTime_Breaker_ms  := 10000;
    Redler[0].SimFault_Overflow := FALSE;
    Redler[0].FaultTime_Overflow_ms := 15000;
    Redler[0].ManualReset       := FALSE;
    // ...

END_DATA_BLOCK
```

### 6.2 –¢–∏–ø–∏ —Ç–∞ —ó—Ö –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**Redler** (`UDT_SimRedlerConfig`):

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
|---|---|
| `Enable` | `TRUE` |
| `StartupTime_ms` | `3000` |
| `StopTime_ms` | `2000` |
| `SimFault_Breaker` | `FALSE` |
| `FaultTime_Breaker_ms` | `10000` |
| `SimFault_Overflow` | `FALSE` |
| `FaultTime_Overflow_ms` | `15000` |
| `ManualReset` | `FALSE` |

**Noria** (`UDT_SimNoriaConfig`):

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
|---|---|
| `Enable` | `TRUE` |
| `StartupTime_ms` | `4000` |
| `StopTime_ms` | `3000` |
| `SimFault_Breaker` | `FALSE` |
| `FaultTime_Breaker_ms` | `10000` |
| `SimFault_Alignment` | `FALSE` |
| `FaultTime_Alignment_ms` | `20000` |
| `SimFault_Overflow` | `FALSE` |
| `FaultTime_Overflow_ms` | `15000` |
| `ManualReset` | `FALSE` |

**Fan** (`UDT_SimFanConfig`):

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
|---|---|
| `Enable` | `TRUE` |
| `StartupTime_ms` | `3000` |
| `StopTime_ms` | `2000` |
| `SimFault_Breaker` | `FALSE` |
| `FaultTime_Breaker_ms` | `10000` |
| `ManualReset` | `FALSE` |

### 6.3 –ö–æ–º–µ–Ω—Ç–∞—Ä –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º

```scl
    // === –ù–æ—Ä—ñ—è "Noria" (id=1, TypedIndex=0) ===
    Noria[0].Enable := TRUE;
    ...
```

### 6.4 –í–∏–∫–ª—é—á–µ–Ω–Ω—è Gate2P

Gate2P **–Ω–µ –≤–∫–ª—é—á–∞—î—Ç—å—Å—è** –¥–æ DB_SimConfig. –£ —Ñ–∞–π–ª—ñ –ø—ñ—Å–ª—è —Å–µ–∫—Ü—ñ—ó `VAR` –¥–æ–¥–∞—î—Ç—å—Å—è –∫–æ–º–µ–Ω—Ç–∞—Ä:

```scl
    // NOTE: Gate2P –≤–∏–∫–ª—é—á–µ–Ω–æ ‚Äî FC_SimGate2P –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ.
```

---

## 7. –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ–∞–π–ª—É DB_SimMechs.scl

### 7.1 –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```scl
// ==============================================================================
// DB_SimMechs - –°—Ç–∞–Ω–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ–≤ –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ (runtime)
// ==============================================================================
// Generated: <–¥–∞—Ç–∞>
// Source   : <—Ñ–∞–π–ª>
// NOTE: Gate2P –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ (—Å–∏–º—É–ª—è—Ç–æ—Ä –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π)
// ==============================================================================

DATA_BLOCK "DB_SimMechs"
{ S7_Optimized_Access := 'TRUE' }
VERSION : 2.0
NON_RETAIN

VAR
    Redler : ARRAY[0.."REDLERS_COUNT"] OF "UDT_SimRedlerState";  // —è–∫—â–æ —î
    Noria  : ARRAY[0.."NORIAS_COUNT"]  OF "UDT_SimNoriaState";   // —è–∫—â–æ —î
    Fan    : ARRAY[0.."FANS_COUNT"]    OF "UDT_SimFanState";      // —è–∫—â–æ —î
END_VAR

BEGIN
END_DATA_BLOCK
```

### 7.2 –ö–ª—é—á–æ–≤–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å

–°–µ–∫—Ü—ñ—è `BEGIN` **–∑–∞–≤–∂–¥–∏ –ø–æ—Ä–æ–∂–Ω—è** ‚Äî `UDT_Sim*State` —î NON_RETAIN runtime-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è –≤ –Ω—É–ª—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ CPU.

---

## 8. –û–±—Ä–æ–±–∫–∞ –∫—Ä–∞–π–æ–≤–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤

| –°–∏—Ç—É–∞—Ü—ñ—è | –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ |
|---|---|
| `devices` ‚Äî –ø–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤ | –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º–∏ –º–∞—Å–∏–≤–∞–º–∏; –≤–∏–≤–µ—Å—Ç–∏ `[WARN]` |
| –í—Å—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó ‚Äî –Ω–µ-–º–µ—Ö–∞–Ω—ñ–∑–º–∏ (NON_MECHANISM_TYPES) | –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ –±–µ–∑ –º–∞—Å–∏–≤—ñ–≤; –≤–∏–≤–µ—Å—Ç–∏ `[WARN]` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ |
| –¢–∏–ø –ø—Ä–∏—Å—Ç—Ä–æ—é –Ω–µ–≤—ñ–¥–æ–º–∏–π (–Ω–µ –≤ –º–∞–ø–ø—ñ–Ω–≥—É, –Ω–µ –≤ NON_MECHANISM_TYPES) | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| `type: null` —É –ø—Ä–∏—Å—Ç—Ä–æ—ó | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` (–Ω–µ—Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º) |
| `id` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –∞–±–æ `null` | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| `id` –Ω–µ —î —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º –∞–±–æ < 0 | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| –î—É–±–ª—ñ–∫–∞—Ç `id` —Å–µ—Ä–µ–¥ –±—É–¥—å-—è–∫–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` |
| –ü—Ä–æ–≥–∞–ª–∏–Ω–∏ –º—ñ–∂ `id` —É –º–∞—Å–∏–≤—ñ Mechs[] | `[WARN]` —ñ–∑ –ø–µ—Ä–µ–ª—ñ–∫–æ–º –ø–æ—Ä–æ–∂–Ω—ñ—Ö —Å–ª–æ—Ç—ñ–≤; –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è |
| `deviceTypes` –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —Ç–∏–ø—É, –∞–ª–µ `devices` –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ –Ω—å–æ–≥–æ | `[ERROR]`, –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2` (–Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø) |

---

## 9. –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞

```
python generate_sim_config.py <path_to_graph.json> [options]

Options:
  --output-dir PATH    –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –¥–ª—è SCL —Ñ–∞–π–ª—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á.: –ø–æ—Ä—É—á –∑ graph.json)
  --project-name NAME  –ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ SCL (–∑–∞ –∑–∞–º–æ–≤—á.: "Elevator_System")
  --version VERSION    –í–µ—Ä—Å—ñ—è –ø—Ä–æ—î–∫—Ç—É –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á.: "1.0.0")
  --no-color           –í–∏–º–∫–Ω—É—Ç–∏ –∫–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å
```

**–ö–æ–¥–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:**

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|---|---|
| `0` | –£—Å–ø—ñ—Ö |
| `1` | –ü–æ–º–∏–ª–∫–∞ –≤—Ö—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É (–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON) |
| `2` | –ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó (–¥—É–±–ª—ñ–∫–∞—Ç–∏ id, –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) |
| `3` | –ü–æ–º–∏–ª–∫–∞ –∑–∞–ø–∏—Å—É –≤–∏—Ö—ñ–¥–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ |

---

## 10. –ö–æ–Ω—Å–æ–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥

–ü—Ä–∏–∫–ª–∞–¥ —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–ª—è `graph.json` –∑ –ø—Ä–∏–∫–ª–∞–¥—É:

```
üìñ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è graph.json...
‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–π–¥–µ–Ω–∞

üìä –ü—Ä–∏—Å—Ç—Ä–æ—ó:
   [OK]   id=1  Noria  "Noria"   ‚Üí TYPE_NORIA,  SlotId=1, TypedIndex=0
   [OK]   id=2  Noria  "Noria 2" ‚Üí TYPE_NORIA,  SlotId=2, TypedIndex=1
   [OK]   id=3  Redler "Redler"  ‚Üí TYPE_REDLER, SlotId=3, TypedIndex=0
   [SKIP] id=4  Gate2P "Gate2P"  ‚Üí TYPE_GATE2P, SlotId=4, TypedIndex=0 (–±–µ–∑ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞)
   [OK]   id=5  Fan    "Fan"     ‚Üí TYPE_FAN,    SlotId=5, TypedIndex=0
   [WARN] id=6  Silo   "–°–∏–ª–æ—Å 1" ‚Üí non-mechanism, –ø—Ä–æ–ø—É—â–µ–Ω–æ
   [WARN] Mechs[]: –ø—Ä–æ–≥–∞–ª–∏–Ω–∏ –Ω–µ –≤–∏—è–≤–ª–µ–Ω–æ

üìà –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏:
   MECHS_COUNT    = 5   (max id —Å–µ—Ä–µ–¥ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤)
   REDLERS_COUNT  = 0   (1 —Ä–µ–¥–ª–µ—Ä  ‚Üí Redler[0..0])
   NORIAS_COUNT   = 1   (2 –Ω–æ—Ä—ñ—ó  ‚Üí Noria[0..1])
   GATES2P_COUNT  = 0   (1 –∑–∞—Å—É–≤–∫–∞ ‚Üí Gate2P[0..0])
   FANS_COUNT     = 0   (1 –≤–µ–Ω—Ç.  ‚Üí Fan[0..0])

üìù –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤...
   ‚úì DB_Mechs.scl     (6 —Å–ª–æ—Ç—ñ–≤ —É Mechs[0..5], 4 –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö —Ç–∏–ø–∏)
   ‚úì DB_SimConfig.scl (Redler√ó1, Noria√ó2, Fan√ó1)
   ‚úì DB_SimMechs.scl  (Redler√ó1, Noria√ó2, Fan√ó1)

‚úÖ –ì–æ—Ç–æ–≤–æ! –§–∞–π–ª–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É: ./output/
```

–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ:

```
üìñ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è graph.json...
‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–π–¥–µ–Ω–∞

üìä –ü—Ä–∏—Å—Ç—Ä–æ—ó:
   [OK]    id=1  Noria  "Noria" ‚Üí TYPE_NORIA, SlotId=1, TypedIndex=0
   [ERROR] id=1  Redler "Redler" ‚Üí –¥—É–±–ª—ñ–∫–∞—Ç id=1 (–≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π "Noria")
   [ERROR] id=?  Pump   "–ù–∞—Å–æ—Å"  ‚Üí —Ç–∏–ø "Pump" –Ω–µ–≤—ñ–¥–æ–º–∏–π (–Ω–µ –≤ –º–∞–ø–ø—ñ–Ω–≥—É, –Ω–µ –≤ NON_MECHANISM_TYPES)

‚ùå –ì–µ–Ω–µ—Ä–∞—Ü—ñ—é –ø–µ—Ä–µ—Ä–≤–∞–Ω–æ: 2 –ø–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó. –í–∏–ø—Ä–∞–≤—Ç–µ graph.json —Ç–∞ –ø–æ–≤—Ç–æ—Ä—ñ—Ç—å.
```

---

## 11. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

```
json_to_scl/
‚îú‚îÄ‚îÄ generate_sim_config.py    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É (CLI)
‚îú‚îÄ‚îÄ parser.py                 # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è graph.json
‚îú‚îÄ‚îÄ mapper.py                 # –ú–∞–ø–ø—ñ–Ω–≥ —Ç–∏–ø—ñ–≤, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è SlotId/TypedIndex
‚îú‚îÄ‚îÄ generators/
‚îÇ   ‚îú‚îÄ‚îÄ db_mechs.py           # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä DB_Mechs.scl
‚îÇ   ‚îú‚îÄ‚îÄ db_sim_config.py      # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä DB_SimConfig.scl
‚îÇ   ‚îî‚îÄ‚îÄ db_sim_mechs.py       # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä DB_SimMechs.scl
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ scl_header.txt        # –®–∞–±–ª–æ–Ω –∑–∞–≥–æ–ª–æ–≤–∫—É —Ñ–∞–π–ª—É
‚îî‚îÄ‚îÄ defaults.py               # –ó–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è —Å–∏–º–∫–æ–Ω—Ñ—ñ–≥—É
```

---

## 12. –í–∏–º–æ–≥–∏ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

| # | –°—Ü–µ–Ω–∞—Ä—ñ–π | –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|---|---|---|
| T1 | graph.json –∑ —É—Å—ñ–º–∞ —Ç–∏–ø–∞–º–∏ (noria, redler, gate2P, fan, silo) | 3 —Ñ–∞–π–ª–∏, silo ‚Üí `[WARN]` (NON_MECHANISM), gate2P –±–µ–∑ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ |
| T2 | graph.json –ª–∏—à–µ –∑ Silo –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏ | 3 –ø–æ—Ä–æ–∂–Ω—ñ—Ö —Ñ–∞–π–ª–∏ –±–µ–∑ VAR-—Å–µ–∫—Ü—ñ–π, `[WARN]` √ó N |
| T3 | graph.json –∑ 2 –Ω–æ—Ä—ñ—è–º–∏ (id=1,2) —ñ 1 —Ä–µ–¥–ª–µ—Ä–æ–º (id=3) | TypedIndex (0,1) –¥–ª—è –Ω–æ—Ä—ñ–π, TypedIndex 0 –¥–ª—è —Ä–µ–¥–ª–µ—Ä–∞; SlotId = –∑–Ω–∞—á–µ–Ω–Ω—è id |
| T4 | –ü–æ—Ä–æ–∂–Ω—ñ–π devices | –§–∞–π–ª–∏ –±–µ–∑ VAR-—Å–µ–∫—Ü—ñ–π, `[WARN]` |
| T5 | –î—É–±–ª—ñ–∫–∞—Ç id —Å–µ—Ä–µ–¥ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ (noria id=1, redler id=1) | –ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2`, `[ERROR]` |
| T6 | –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON | –ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `1`, `[ERROR]` |
| T7 | `type=null` —É –ø—Ä–∏—Å—Ç—Ä–æ—ó | –ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2`, `[ERROR]` (–Ω–µ—Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º) |
| T8 | –¢–∏–ø –Ω–µ –≤ –º–∞–ø–ø—ñ–Ω–≥—É —ñ –Ω–µ –≤ NON_MECHANISM_TYPES (–Ω–∞–ø—Ä. "Pump") | –ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2`, `[ERROR]` |
| T9 | `id` –Ω–µ —á–∏—Å–ª–æ–≤–∏–π (–Ω–∞–ø—Ä. id="abc") | –ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `2`, `[ERROR]` |
| T10 | –ü—Ä–æ–≥–∞–ª–∏–Ω–∏ –º—ñ–∂ id (id=0, id=5, id=10) | `[WARN]` –ø—Ä–æ –ø–æ—Ä–æ–∂–Ω—ñ —Å–ª–æ—Ç–∏, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è, Mechs[0..10] |

---

## 13. –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –¥–ª—è –≤—Ö—ñ–¥–Ω–æ–≥–æ graph.json

*–í—Ö—ñ–¥:* `graph.json` –∑ –ø—Ä–∏–∫–ª–∞–¥—É (Noria id=1, Noria2 id=2, Redler id=3, Gate2P id=4, Fan id=5, Silo —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–ª–æ—Ç—ñ–≤ (SlotId = id):**

```
Mechs[1] ‚Üí Noria   "Noria"   (id=1), TypedIndex=0
Mechs[2] ‚Üí Noria   "Noria 2" (id=2), TypedIndex=1
Mechs[3] ‚Üí Redler  "Redler"  (id=3), TypedIndex=0
Mechs[4] ‚Üí Gate2P  "Gate2P"  (id=4), TypedIndex=0
Mechs[5] ‚Üí Fan     "Fan"     (id=5), TypedIndex=0
Mechs[0] ‚Üí (–ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ª–æ—Ç ‚Äî –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è)
```

> `[WARN]` Mechs[0] –Ω–µ –∑–∞–π–Ω—è—Ç–∏–π –∂–æ–¥–Ω–∏–º –ø—Ä–∏—Å—Ç—Ä–æ—î–º.

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏:**

```
MECHS_COUNT   = 5   (max id = 5)
REDLERS_COUNT = 0   (1 —Ä–µ–¥–ª–µ—Ä ‚Üí Redler[0..0])
NORIAS_COUNT  = 1   (2 –Ω–æ—Ä—ñ—ó  ‚Üí Noria[0..1])
GATES2P_COUNT = 0   (1 –∑–∞—Å—É–≤–∫–∞ ‚Üí Gate2P[0..0])
FANS_COUNT    = 0   (1 –≤–µ–Ω—Ç.  ‚Üí Fan[0..0])
```

**–°–∏–º—É–ª—è—Ç–æ—Ä–∏:** Redler[0], Noria[0], Noria[1], Fan[0] ‚Äî Gate2P –±–µ–∑ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞.

---

*–ö—ñ–Ω–µ—Ü—å –¢–ó*
