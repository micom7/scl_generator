# –¢–ó: –í–µ–±-—Å–µ—Ä–≤—ñ—Å –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ JSON ‚Üí SCL

**–í–µ—Ä—Å—ñ—è:** 1.0  
**–î–∞—Ç–∞:** 2026-02-20  
**–ü—Ä–æ—î–∫—Ç:** Yagotin_Lysohor / Elevator_System  
**–ü–æ–≤'—è–∑–∞–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç:** –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md (–ª–æ–≥—ñ–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó SCL)

---

## 1. –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–ø–∏—Å

### 1.1 –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–í–µ–±-—Å–µ—Ä–≤—ñ—Å –Ω–∞–¥–∞—î –±—Ä–∞—É–∑–µ—Ä–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ `JSON ‚Üí SCL`. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î `graph.json`, –Ω–∞–ª–∞—à—Ç–æ–≤—É—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –∑–∞–ø—É—Å–∫–∞—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —ñ —Å–∫–∞—á—É—î —Ä–µ–∑—É–ª—å—Ç—É—é—á—ñ SCL-—Ñ–∞–π–ª–∏ ‚Äî –±–µ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python, –±–µ–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞.

### 1.2 –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

–°–µ—Ä–≤—ñ—Å —Ä–æ–∑—Ä–æ–±–ª—è—î—Ç—å—Å—è **–æ–∫—Ä–µ–º–æ** –≤—ñ–¥ –≥—Ä–∞—Ñ-—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞, –∞–ª–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∏–π –Ω–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ **—Ç–æ–º—É —Å–∞–º–æ–º—É `docker-compose`** —è–∫ –¥—Ä—É–≥–∏–π —Å–µ—Ä–≤—ñ—Å.

```
docker-compose.yml
‚îú‚îÄ‚îÄ frontend   ‚Üí –ø–æ—Ä—Ç 5173  (–≥—Ä–∞—Ñ-—Ä–µ–¥–∞–∫—Ç–æ—Ä, —ñ—Å–Ω—É—é—á–∏–π)
‚îî‚îÄ‚îÄ codegen    ‚Üí –ø–æ—Ä—Ç 8080  (—Ü–µ–π —Å–µ—Ä–≤—ñ—Å)
```

–ú—ñ–∂ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ **–Ω–µ–º–∞—î** –ø—Ä—è–º–æ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–æ–¥—É ‚Äî –≤–æ–Ω–∏ —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ. –ó–≤'—è–∑–æ–∫ –ª–∏—à–µ —Ç–æ–ø–æ–ª–æ–≥—ñ—á–Ω–∏–π: –æ–±–∏–¥–≤–∞ –æ–±—Å–ª—É–≥–æ–≤—É—é—Ç—å –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫–∏–π —Ä–µ–¥–∞–≥—É—î –≥—Ä–∞—Ñ –≤ –æ–¥–Ω–æ–º—É —ñ –≥–µ–Ω–µ—Ä—É—î –∫–æ–¥ –≤ —ñ–Ω—à–æ–º—É.

### 1.3 –°—Ç–µ–∫

| –®–∞—Ä | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –í–µ—Ä—Å—ñ—è |
|---|---|---|
| HTTP-—Å–µ—Ä–≤–µ—Ä | Python + FastAPI | 3.12 / 0.115+ |
| ASGI runner | Uvicorn | 0.30+ |
| UI | –û–¥–Ω–∞ HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–≤–±—É–¥–æ–≤–∞–Ω–∞ —É FastAPI) | ‚Äî |
| JS —É UI | Vanilla JS (–±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤, –±–µ–∑ –∑–±—ñ—Ä–∫–∏) | ES2020 |
| –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è SCL | –ú–æ–¥—É–ª—ñ –∑ –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md | ‚Äî |
| –ü–∞–∫—É–≤–∞–Ω–Ω—è | Docker (python:3.12-slim) | ‚Äî |

**–ß–æ–º—É Vanilla JS –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É:** —Å–µ—Ä–≤—ñ—Å —î –¥–æ–ø–æ–º—ñ–∂–Ω–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, –∞ –Ω–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∏–º UI. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –±—ñ–ª–¥—É —Å–ø—Ä–æ—â—É—î —Ä–æ–∑—Ä–æ–±–∫—É —Ç–∞ Docker-–æ–±—Ä–∞–∑.

---

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
codegen/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ main.py                  # FastAPI app: –º–∞—Ä—à—Ä—É—Ç–∏ + –≤–±—É–¥–æ–≤–∞–Ω–∏–π HTML
‚îú‚îÄ‚îÄ ui.html                  # HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ —Ä–æ–∑—Ä–æ–±–∫–∏)
‚îÇ                            # –ø—Ä–∏ –∑–±—ñ—Ä—Ü—ñ –≤–±—É–¥–æ–≤—É—î—Ç—å—Å—è —É main.py –∞–±–æ —Ä–æ–∑–¥–∞—î—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω–æ
‚îú‚îÄ‚îÄ generator/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ parser.py            # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è graph.json
‚îÇ   ‚îú‚îÄ‚îÄ mapper.py            # –ú–∞–ø–ø—ñ–Ω–≥ —Ç–∏–ø—ñ–≤, SlotId/TypedIndex
‚îÇ   ‚îú‚îÄ‚îÄ defaults.py          # NON_MECHANISM_TYPES, –¥–µ—Ñ–æ–ª—Ç–∏ —Å–∏–º–∫–æ–Ω—Ñ—ñ–≥—É
‚îÇ   ‚îî‚îÄ‚îÄ generators/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ db_mechs.py
‚îÇ       ‚îú‚îÄ‚îÄ db_sim_config.py
‚îÇ       ‚îî‚îÄ‚îÄ db_sim_mechs.py
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ test_parser.py
    ‚îú‚îÄ‚îÄ test_mapper.py
    ‚îî‚îÄ‚îÄ fixtures/
        ‚îú‚îÄ‚îÄ graph_full.json
        ‚îú‚îÄ‚îÄ graph_empty.json
        ‚îî‚îÄ‚îÄ graph_invalid.json
```

**–ü—Ä–∞–≤–∏–ª–æ:** –º–æ–¥—É–ª—ñ –≤ `generator/` –Ω–µ –º–∞—é—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤—ñ–¥ FastAPI –∞–±–æ –±—É–¥—å-—è–∫–∏—Ö HTTP-–ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤. –í–æ–Ω–∏ —î —á–∏—Å—Ç–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ `parse ‚Üí map ‚Üí generate`. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–µ–∑–∞–ª–µ–∂–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ CLI-—Ä–µ–∂–∏–º—É.

---

## 3. HTTP API

### 3.1 `GET /`

–ü–æ–≤–µ—Ä—Ç–∞—î HTML-—Å—Ç–æ—Ä—ñ–Ω–∫—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É (`ui.html`). Content-Type: `text/html`.

### 3.2 `POST /generate`

–û—Å–Ω–æ–≤–Ω–∏–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç. –ü—Ä–∏–π–º–∞—î `multipart/form-data`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É:**

| –ü–æ–ª–µ | –¢–∏–ø | –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π | –û–ø–∏—Å |
|---|---|---|---|
| `file` | `UploadFile` (.json) | ‚úÖ | –§–∞–π–ª graph.json |
| `project_name` | `string` | –Ω—ñ | –ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ SCL (default: `"Elevator_System"`) |
| `version` | `string` | –Ω—ñ | –í–µ—Ä—Å—ñ—è –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ SCL (default: `"1.0.0"`) |

**–£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (HTTP 200):**

Content-Type: `application/zip`  
Content-Disposition: `attachment; filename="scl_<project_name>_<timestamp>.zip"`

–ê—Ä—Ö—ñ–≤ –º—ñ—Å—Ç–∏—Ç—å:
```
DB_Mechs.scl
DB_SimConfig.scl
DB_SimMechs.scl
generation_report.txt
```

**`generation_report.txt`** ‚Äî —Ç–µ–∫—Å—Ç–æ–≤–∏–π –∑–≤—ñ—Ç —É —Ç–æ–º—É –∂ —Ñ–æ—Ä–º–∞—Ç—ñ, —â–æ —ñ –∫–æ–Ω—Å–æ–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥ CLI (–±–µ–∑ ANSI-–∫–æ–ª—å–æ—Ä—ñ–≤). –ü—Ä–∏–∫–ª–∞–¥:

```
Generated: 2026-02-20 15:43:11
Source: graph.json
Project: Elevator_System v1.0.0

Devices:
  [OK]   id=1  Noria  "Noria"   -> TYPE_NORIA,  SlotId=1, TypedIndex=0
  [OK]   id=3  Redler "Redler"  -> TYPE_REDLER, SlotId=3, TypedIndex=0
  [SKIP] id=4  Gate2P "Gate2P"  -> TYPE_GATE2P, SlotId=4, TypedIndex=0 (no simulator)
  [WARN] id=6  Silo   "Silo 1"  -> non-mechanism, skipped

Constants:
  MECHS_COUNT    = 4
  REDLERS_COUNT  = 0
  NORIAS_COUNT   = 0
  GATES2P_COUNT  = 0
  FANS_COUNT     = 0

Files:
  DB_Mechs.scl     OK
  DB_SimConfig.scl OK
  DB_SimMechs.scl  OK
```

**–ü–æ–º–∏–ª–∫–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (HTTP 422):**

Content-Type: `application/json`

```json
{
  "ok": false,
  "errors": [
    "–ü—Ä–∏—Å—Ç—Ä—ñ–π \"–ù–∞—Å–æ—Å\" (id=7): —Ç–∏–ø \"Pump\" –Ω–µ–≤—ñ–¥–æ–º–∏–π.",
    "–ü—Ä–∏—Å—Ç—Ä—ñ–π \"–ù–æ—Ä–∏—è\" (id=1): –¥—É–±–ª—ñ–∫–∞—Ç id=1."
  ],
  "warnings": [
    "–ü—Ä–∏—Å—Ç—Ä—ñ–π \"Silo 1\" (id=6): non-mechanism, –ø—Ä–æ–ø—É—â–µ–Ω–æ."
  ]
}
```

HTTP 422 (–∞ –Ω–µ 400) ‚Äî —â–æ–± –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏ –ø–æ–º–∏–ª–∫—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö –≤—ñ–¥ –ø–æ–º–∏–ª–∫–∏ —Ñ–æ—Ä–º–∞—Ç—É –∑–∞–ø–∏—Ç—É.

**–ü–æ–º–∏–ª–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É –∑–∞–ø–∏—Ç—É (HTTP 400):**

```json
{
  "ok": false,
  "errors": ["–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON —É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ–º—É —Ñ–∞–π–ª—ñ."]
}
```

### 3.3 `GET /health`

–ü–æ–≤–µ—Ä—Ç–∞—î HTTP 200 + `{"status": "ok"}`. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Docker healthcheck.

---

## 4. –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### 4.1 –ó–∞–≥–∞–ª—å–Ω–∏–π –≤–∏–≥–ª—è–¥

–û–¥–Ω–∞ HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∞. –ú—ñ–Ω—ñ–º–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π –¥–∏–∑–∞–π–Ω —É —Ç–µ–º–Ω—ñ–π —Ç–µ–º—ñ (RGB-–ø–∞–ª—ñ—Ç—Ä–∞ —Å—Ö–æ–∂–∞ –Ω–∞ –≥—Ä–∞—Ñ-—Ä–µ–¥–∞–∫—Ç–æ—Ä: `#0f0f1a`, `#16213e`, `#0f3460`).

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚öôÔ∏è  –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä   JSON ‚Üí SCL   TIA Portal 19      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  –§–∞–π–ª graph.json                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ  üìÇ –ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏        ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ     graph.json —Å—é–¥–∏              ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ     ‚úÖ graph.json –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ (4.2 KB)               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏                                          ‚îÇ
‚îÇ  –ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É  [Elevator_System        ]           ‚îÇ
‚îÇ  –í–µ—Ä—Å—ñ—è         [1.0.0                  ]           ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  [‚öôÔ∏è  –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ SCL]                               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –†–µ–∑—É–ª—å—Ç–∞—Ç                                          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚úÖ Noria   id=1  ‚Üí  TYPE_NORIA,  Slot=1, TIdx=0    ‚îÇ
‚îÇ  ‚úÖ Redler  id=3  ‚Üí  TYPE_REDLER, Slot=3, TIdx=0    ‚îÇ
‚îÇ  ‚è≠  Gate2P  id=4  ‚Üí  TYPE_GATE2P, Slot=4 (no sim)  ‚îÇ
‚îÇ  ‚ö†Ô∏è  Silo    id=6  ‚Üí  non-mechanism, –ø—Ä–æ–ø—É—â–µ–Ω–æ       ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  MECHS_COUNT=4  REDLERS_COUNT=0  NORIAS_COUNT=0 ... ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  [‚¨áÔ∏è  –°–∫–∞—á–∞—Ç–∏ SCL-—Ñ–∞–π–ª–∏ (ZIP)]                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞

**Drop-–∑–æ–Ω–∞ –¥–ª—è —Ñ–∞–π–ª—É:**
- Drag-and-drop –∞–±–æ –∫–ª—ñ–∫ ‚Üí `<input type="file" accept=".json">`.
- –ü—ñ—Å–ª—è –≤–∏–±–æ—Ä—É —Ñ–∞–π–ª—É ‚Äî –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —ñ–º'—è —Ç–∞ —Ä–æ–∑–º—ñ—Ä.
- –§–∞–π–ª –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–∏—à–µ —É –ø–∞–º'—è—Ç—ñ –±—Ä–∞—É–∑–µ—Ä–∞ (JS `File` object), –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

**–ö–Ω–æ–ø–∫–∞ "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏":**
- –°—Ç–∞–Ω: `disabled` –ø–æ–∫–∏ —Ñ–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ.
- –ü—ñ—Å–ª—è –∫–ª—ñ–∫—É: –∫–Ω–æ–ø–∫–∞ –±–ª–æ–∫—É—î—Ç—å—Å—è, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Å–ø—ñ–Ω–µ—Ä (`‚è≥`).
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î `POST /generate` —á–µ—Ä–µ–∑ `fetch` –∑ `FormData`.

**–ë–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É:**
- –ü—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –¥–æ –ø–µ—Ä—à–æ–≥–æ –∑–∞–ø–∏—Ç—É.
- –ü—Ä–∏ —É—Å–ø—ñ—Ö—É ‚Äî —Ä—è–¥–∫–∏ –∑–≤—ñ—Ç—É –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º–∏ —ñ–∫–æ–Ω–∫–∞–º–∏ (`‚úÖ ‚è≠ ‚ö†Ô∏è ‚ùå`).
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ ‚Äî —Ä—è–¥–∫–æ–º –ø—ñ–¥ —Å–ø–∏—Å–∫–æ–º –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤.
- –ö–Ω–æ–ø–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è ZIP ‚Äî –∑'—è–≤–ª—è—î—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ —É—Å–ø—ñ—Ö—É. –ü—Ä–∏ –∫–ª—ñ–∫—É ‚Äî –±—Ä–∞—É–∑–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `URL.createObjectURL(blob)`.
- –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ ‚Äî —á–µ—Ä–≤–æ–Ω–∏–π –±–ª–æ–∫ –∑ –ø–µ—Ä–µ–ª—ñ–∫–æ–º –ø–æ–º–∏–ª–æ–∫.

**–°—Ç–∞–Ω–∏ UI:**

| –°—Ç–∞–Ω | –û–ø–∏—Å |
|---|---|
| `idle` | –ü–æ—á–∞—Ç–∫–æ–≤–∏–π. –ö–Ω–æ–ø–∫–∞ disabled. |
| `ready` | –§–∞–π–ª –≤–∏–±—Ä–∞–Ω–æ. –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞. |
| `loading` | –ó–∞–ø–∏—Ç –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ. –ö–Ω–æ–ø–∫–∞ + drop-–∑–æ–Ω–∞ disabled. –°–ø—ñ–Ω–µ—Ä. |
| `success` | –í—ñ–¥–ø–æ–≤—ñ–¥—å 200. –ü–æ–∫–∞–∑–∞–Ω–æ –∑–≤—ñ—Ç + –∫–Ω–æ–ø–∫–∞ ZIP. |
| `error` | –í—ñ–¥–ø–æ–≤—ñ–¥—å 400/422. –ü–æ–∫–∞–∑–∞–Ω–æ –±–ª–æ–∫ –ø–æ–º–∏–ª–æ–∫. |

### 4.3 –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –∑–∞–ø–∏—Ç

–ü—ñ—Å–ª—è `success` –∞–±–æ `error` ‚Äî —Ñ–æ—Ä–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –∑–∞–ø–æ–≤–Ω–µ–Ω–æ—é. –ö–Ω–æ–ø–∫–∞ "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏" –∑–Ω–æ–≤—É –∞–∫—Ç–∏–≤–Ω–∞. –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π ZIP-–±–ª–æ–∫ –∑–Ω–∏–∫–∞—î –ø—Ä–∏ –Ω–æ–≤–æ–º—É –∑–∞–ø–∏—Ç—ñ.

---

## 5. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

–í—Å—ñ –ø–æ–º–∏–ª–∫–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è —É —Ñ–æ—Ä–º–∞—Ç—ñ `{"ok": false, "errors": [...], "warnings": [...]}`.

| –°–∏—Ç—É–∞—Ü—ñ—è | HTTP | –ü–æ–ª–µ `errors` |
|---|---|---|
| –§–∞–π–ª –Ω–µ —î JSON | 400 | `"–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON"` |
| –í—ñ–¥—Å—É—Ç–Ω—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è (`devices`, `deviceTypes`) | 400 | `"–í—ñ–¥—Å—É—Ç–Ω—î –ø–æ–ª–µ devices"` |
| –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö (–¥—É–±–ª—ñ–∫–∞—Ç id, –Ω–µ–≤—ñ–¥–æ–º–∏–π —Ç–∏–ø —Ç–æ—â–æ) | 422 | –°–ø–∏—Å–æ–∫ –∑ –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md ¬ß8 |
| –í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ | 500 | `"–í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞: <exc type>"` (–±–µ–∑ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å—É –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ) |

**–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, non-mechanism —Ç–∏–ø–∏, –ø—Ä–æ–≥–∞–ª–∏–Ω–∏ –≤ —Å–ª–æ—Ç–∞—Ö) –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è —Ä–∞–∑–æ–º –∑ HTTP 200 ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø—ñ—à–Ω–æ.

---

## 6. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—É

–í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ **–∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**. –ñ–æ–¥–Ω–∏—Ö –∫–æ–Ω—Ñ—ñ–≥-—Ñ–∞–π–ª—ñ–≤.

| –ó–º—ñ–Ω–Ω–∞ | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º | –û–ø–∏—Å |
|---|---|---|
| `HOST` | `0.0.0.0` | Bind address |
| `PORT` | `8080` | HTTP –ø–æ—Ä—Ç |
| `LOG_LEVEL` | `info` | –†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è uvicorn |
| `MAX_UPLOAD_SIZE_MB` | `10` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä graph.json |
| `DEFAULT_PROJECT_NAME` | `Elevator_System` | –î–µ—Ñ–æ–ª—Ç–Ω–∞ –Ω–∞–∑–≤–∞ –¥–ª—è SCL-–∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ |

---

## 7. Docker

### 7.1 Dockerfile

```dockerfile
FROM python:3.12-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8080

HEALTHCHECK --interval=30s --timeout=5s --start-period=10s --retries=3 \
  CMD python -c "import urllib.request; urllib.request.urlopen('http://localhost:8080/health')"

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8080"]
```

### 7.2 requirements.txt

```
fastapi==0.115.0
uvicorn[standard]==0.30.6
python-multipart==0.0.9
```

–ë–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó SCL ‚Äî –ª–∏—à–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ Python.

### 7.3 –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ docker-compose

```yaml
services:
  frontend:
    build: ./frontend
    ports:
      - "5173:80"
    restart: unless-stopped

  codegen:
    build: ./codegen
    ports:
      - "8080:8080"
    restart: unless-stopped
    environment:
      - LOG_LEVEL=info
    healthcheck:
      test: ["CMD", "python", "-c",
             "import urllib.request; urllib.request.urlopen('http://localhost:8080/health')"]
      interval: 30s
      timeout: 5s
      retries: 3
```

–°–µ—Ä–≤—ñ—Å–∏ **–Ω–µ –∑–∞–ª–µ–∂–∞—Ç—å** –æ–¥–∏–Ω –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ (`depends_on` –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω).

### 7.4 –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫

```powershell
# –õ–∏—à–µ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (—Ä–æ–∑—Ä–æ–±–∫–∞)
cd codegen
docker build -t codegen-dev .
docker run -p 8080:8080 codegen-dev

# –û–±–∏–¥–≤–∞ —Å–µ—Ä–≤—ñ—Å–∏ —Ä–∞–∑–æ–º
cd ..   # –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–µ–∫—Ç—É
docker compose up -d --build
```

---

## 8. –†–æ–∑—Ä–æ–±–∫–∞ –±–µ–∑ Docker

```bash
cd codegen
pip install -r requirements.txt
uvicorn main:app --reload --port 8080
```

–°–µ—Ä–≤—ñ—Å –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:8080`. `--reload` –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ñ–∞–π–ª—ñ–≤.

---

## 9. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 9.1 Unit-—Ç–µ—Å—Ç–∏ (pytest)

–ü–æ–∫—Ä–∏–≤–∞—é—Ç—å –ª–∏—à–µ –º–æ–¥—É–ª—ñ –≤ `generator/` ‚Äî –±–µ–∑ HTTP. –ó–∞–ø—É—Å–∫:

```bash
cd codegen
pip install pytest
pytest tests/ -v
```

–¢–µ—Å—Ç-–∫–µ–π—Å–∏ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å T1‚ÄìT10 –∑ –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md ¬ß12.

### 9.2 –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ (HTTP)

–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä —á–µ—Ä–µ–∑ `httpx` –∞–±–æ `curl`:

```bash
# –£—Å–ø—ñ—à–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è
curl -X POST http://localhost:8080/generate \
  -F "file=@graph.json" \
  -F "project_name=TestProject" \
  -o result.zip

# –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ñ–∞–π–ª
curl -X POST http://localhost:8080/generate \
  -F "file=@invalid.json" | python -m json.tool

# Health
curl http://localhost:8080/health
```

### 9.3 –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è UI

| –°—Ü–µ–Ω–∞—Ä—ñ–π | –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|---|---|
| –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:8080` | HTML –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è, drop-–∑–æ–Ω–∞ –≤–∏–¥–∏–º–∞ |
| Drag-and-drop `graph.json` | –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —ñ–º'—è —Ñ–∞–π–ª—É |
| –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏" –±–µ–∑ —Ñ–∞–π–ª—É | –ö–Ω–æ–ø–∫–∞ disabled, –Ω—ñ—á–æ–≥–æ –Ω–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è |
| –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–∞–ª—ñ–¥–Ω–∏–π `graph.json`, –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏" | –ó'—è–≤–ª—è—î—Ç—å—Å—è –∑–≤—ñ—Ç, –∫–Ω–æ–ø–∫–∞ ZIP |
| –ö–ª—ñ–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É ZIP | –ë—Ä–∞—É–∑–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î `.zip` –∑ —Ç—Ä—å–æ–º–∞ SCL-—Ñ–∞–π–ª–∞–º–∏ |
| –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON | –ß–µ—Ä–≤–æ–Ω–∏–π –±–ª–æ–∫ –∑ –ø–æ–º–∏–ª–∫–æ—é |

---

## 10. –†–æ–∑–ø–æ–¥—ñ–ª –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –º—ñ–∂ –¢–ó-–¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

| –©–æ | –î–µ –æ–ø–∏—Å–∞–Ω–æ |
|---|---|
| –õ–æ–≥—ñ–∫–∞ –º–∞–ø–ø—ñ–Ω–≥—É —Ç–∏–ø—ñ–≤ JSON ‚Üí TIA Portal | –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md ¬ß3 |
| –ê–ª–≥–æ—Ä–∏—Ç–º SlotId / TypedIndex | –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md ¬ß4 |
| –§–æ—Ä–º–∞—Ç —Ç–∞ –≤–º—ñ—Å—Ç SCL-—Ñ–∞–π–ª—ñ–≤ | –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md ¬ß5‚Äì7 |
| –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ –∫—Ä–∞–π–æ–≤—ñ –≤–∏–ø–∞–¥–∫–∏ | –¢–ó_–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä_JSON_to_SCL.md ¬ß8 |
| HTTP API, ZIP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å, —Ñ–æ—Ä–º–∞—Ç –ø–æ–º–∏–ª–æ–∫ | **–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç ¬ß3** |
| UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–∞ —Å—Ç–∞–Ω–∏ | **–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç ¬ß4** |
| Docker, –ø–æ—Ä—Ç–∏, env-–∑–º—ñ–Ω–Ω—ñ | **–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç ¬ß6‚Äì7** |
| –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É | **–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç ¬ß9** |

---

## 11. –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –Ω–µ-–≤–∏–º–æ–≥–∏

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –Ω–µ–º–∞—î** ‚Äî —Å–µ—Ä–≤—ñ—Å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π, –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.
- **–°—Ç–∞–Ω—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –Ω–µ–º–∞—î** ‚Äî –∫–æ–∂–µ–Ω POST –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π, —Ñ–∞–π–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ –¥–∏—Å–∫—É.
- **HTTPS –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω** ‚Äî —Ç—Ä–∞—Ñ—ñ–∫ –ª–æ–∫–∞–ª—å–Ω–∏–π (localhost –∞–±–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—è –º–µ—Ä–µ–∂–∞).
- **–ß–µ—Ä–≥–∞ –∑–∞–¥–∞—á –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∑–∞–π–º–∞—î < 1 —Å–µ–∫.
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞**.
- –°–µ—Ä–≤—ñ—Å –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –≥—Ä–∞—Ñ-—Ä–µ–¥–∞–∫—Ç–æ—Ä —ñ –Ω–µ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –Ω—å–æ–≥–æ –ø–æ –º–µ—Ä–µ–∂—ñ.

---

*–ö—ñ–Ω–µ—Ü—å –¢–ó*
